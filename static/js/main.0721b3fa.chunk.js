(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{233:function(e,t,a){e.exports=a(500)},238:function(e,t,a){},500:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=(a(238),a(239),a(78)),i=a(213),s=a(214),u=a(230),d=a(215),p=a(231),m=a(161),f=a.n(m),h=a(503),v=a(13),b=a(30),g=a(89),y=a(38),E=a.n(y),w=a(65),k=a(50),j=a(92),x=a(502),O=a(506),F=a(507),I=a(162),A=a.n(I),S=a(32),D=["Science","History","Religion","Thailand","Art","Music","International","Technology","Health","Food"],T=["Who","When","Where","What","How + Adj/Adv"];function q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"txt",r=new Blob([decodeURIComponent(encodeURI(e))],{type:t}),c=URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",c),o.setAttribute("download",a+"."+n);var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(l)}var C=a(216),W=function(){return r.a.createElement(C.a,{indicator:r.a.createElement(v.a,{type:"loading",style:{fontSize:16},spin:!0})})},z=j.a.Option,M=x.a.Item,B=O.a.TextArea,H=function(e){var t=e.form.getFieldDecorator,a=e.db,c=e.mode,o=e.closeModal,i=e.setTempData,s=Object(n.useState)(!1),u=Object(k.a)(s,2),d=u[0],p=u[1],m=Object(n.useState)(!1),f=Object(k.a)(m,2),h=f[0],v=f[1],y=Object(n.useState)(!1),I=Object(k.a)(y,2),q=I[0],C=I[1],H=Object(n.useState)(!1),N=Object(k.a)(H,2),P=N[0],R=N[1],V=Object(n.useState)(!1),U=Object(k.a)(V,2),J=U[0],K=U[1],L=function(t,a){return function(){var n=Object(w.a)(E.a.mark(function n(r){var c,o,l,i,s,u;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c=r.target.value){n.next=3;break}return n.abrupt("return");case 3:if(n.prev=3,o=e.form,l=o.setFieldsValue,i=o.getFieldValue,(i(t)||"").split(",").join("")!==c){n.next=8;break}return n.abrupt("return");case 8:return a(!0),n.next=11,A.a.post("https://py-thai-tokenizer.herokuapp.com/icu",{text:c},{headers:{"Access-Control-Allow-Origin":"*"}});case 11:s=n.sent,u=s.data.tokens,l(Object(g.a)({},t,u)),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),console.error(n.t0);case 19:return n.prev=19,a(!1),n.finish(19);case 22:case"end":return n.stop()}},n,this,[[3,16,19,22]])}));return function(e){return n.apply(this,arguments)}}()};return t("id"),r.a.createElement(x.a,null,r.a.createElement(M,{colon:!1,label:r.a.createElement("span",null,"Article ID ",J&&r.a.createElement(W,null))},t("articleId",{rules:[{required:!0}]})(r.a.createElement(O.a,{disabled:!0}))),r.a.createElement(M,{colon:!1,label:"Article"},t("article",{rules:[{required:!0}]})(r.a.createElement(O.a,{onBlur:function(t,a){return function(){var n=Object(w.a)(E.a.mark(function n(r){var c,o,l,i,s;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c=r.target.value){n.next=3;break}return n.abrupt("return");case 3:if(n.prev=3,o=e.form,l=o.setFieldsValue,((0,o.getFieldValue)(t)||"").split(",").join("")!==c){n.next=8;break}return n.abrupt("return");case 8:return a(!0),n.next=11,A.a.post("https://py-thai-tokenizer.herokuapp.com/wiki",{title:c},{headers:{"Access-Control-Allow-Origin":"*"}});case 11:i=n.sent,s=i.data.id,l(Object(g.a)({},t,s)),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),console.error(n.t0);case 19:return n.prev=19,a(!1),n.finish(19);case 22:case"end":return n.stop()}},n,this,[[3,16,19,22]])}));return function(e){return n.apply(this,arguments)}}()}("articleId",K)}))),r.a.createElement(M,{colon:!1,label:"Category"},t("category",{initialValue:"Science",rules:[{required:!0}]})(r.a.createElement(j.a,null,D.map(function(e,t){return r.a.createElement(z,{value:e,key:t},e)})))),r.a.createElement(M,{colon:!1,label:"Paragraph"},t("paragraph",{rules:[{required:!0}]})(r.a.createElement(B,{onInput:function(e){var t=e.target;t.style.height="",t.style.height=Math.min(t.scrollHeight,100)+"px"},onBlur:L("paragraphTokens",v)}))),r.a.createElement(M,{colon:!1,label:r.a.createElement("span",null,"Paragraph Tokens ",h&&r.a.createElement(W,null))},t("paragraphTokens",{rules:[{required:!0}]})(r.a.createElement(B,null))),r.a.createElement(M,{colon:!1,label:"WH Word"},t("wh",{initialValue:"Who",rules:[{required:!0}]})(r.a.createElement(j.a,null,T.map(function(e,t){return r.a.createElement(z,{value:e,key:t},e)})))),r.a.createElement(M,{colon:!1,label:"Question"},t("question",{rules:[{required:!0}]})(r.a.createElement(O.a,{onBlur:L("questionTokens",C)}))),r.a.createElement(M,{colon:!1,label:r.a.createElement("span",null,"Question Tokens ",q&&r.a.createElement(W,null))},t("questionTokens",{rules:[{required:!0}]})(r.a.createElement(O.a,null))),r.a.createElement(M,{colon:!1,label:"Answer"},t("answer",{rules:[{required:!0}]})(r.a.createElement(O.a,{onBlur:L("answerTokens",R)}))),r.a.createElement(M,{colon:!1,label:r.a.createElement("span",null,"Answer Tokens ",P&&r.a.createElement(W,null))},t("answerTokens",{rules:[{required:!0}]})(r.a.createElement(O.a,null))),"create"===c&&r.a.createElement(M,{style:{textAlign:"center"}},r.a.createElement(b.a,{onClick:function(t){var n=e.form.validateFields;t.preventDefault(),n(function(){var e=Object(w.a)(E.a.mark(function e(t,n){var r,c,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return r=D.findIndex(function(e){return e===n.category}),c=T.findIndex(function(e){return e===n.wh}),e.prev=4,p(!0),o=Object(l.a)({},n,{categoryId:r,whId:c}),e.next=9,a.collection("dataset").add(o);case 9:i(o),F.a.success({message:"Data added successfully."}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),F.a.error({message:"Something went wrong, please try again."});case 17:return e.prev=17,p(!1),e.finish(17);case 20:case"end":return e.stop()}},e,this,[[4,13,17,20]])}));return function(t,a){return e.apply(this,arguments)}}())},style:{width:100,height:40},type:"primary",loading:d},"Add")),"edit"===c&&r.a.createElement(M,{style:{textAlign:"center"}},r.a.createElement(b.a,{onClick:function(t){var n=e.form.validateFieldsAndScroll;t.preventDefault(),n(function(){var e=Object(w.a)(E.a.mark(function e(t,n){var r,c,i,s,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return r=D.findIndex(function(e){return e===n.category}),c=T.findIndex(function(e){return e===n.wh}),i=n.id,s=Object(S.omit)(n,"id"),e.prev=6,p(!0),u=a.collection("dataset").doc(i),e.next=11,u.update(Object(l.a)({},s,{categoryId:r,whId:c}));case 11:F.a.success({message:"Data edited successfully."}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0),F.a.error({message:"Something went wrong, please try again."});case 18:return e.prev=18,p(!1),o(),e.finish(18);case 22:case"end":return e.stop()}},e,this,[[6,14,18,22]])}));return function(t,a){return e.apply(this,arguments)}}())},style:{width:100,height:40},type:"primary",loading:d},"Edit")))};H.defaultProps={mode:"create",closeModal:function(){}};var N=x.a.create({mapPropsToFields:function(e){var t=e.data;return{id:x.a.createFormField({value:Object(S.get)(t,"id","")}),articleId:x.a.createFormField({value:Object(S.get)(t,"articleId","")}),article:x.a.createFormField({value:Object(S.get)(t,"article","")}),category:x.a.createFormField({value:Object(S.get)(t,"category","Science")}),paragraph:x.a.createFormField({value:Object(S.get)(t,"paragraph","")}),paragraphTokens:x.a.createFormField({value:Object(S.get)(t,"paragraphTokens","")}),wh:x.a.createFormField({value:Object(S.get)(t,"wh","Who")}),question:x.a.createFormField({value:Object(S.get)(t,"question","")}),questionTokens:x.a.createFormField({value:Object(S.get)(t,"questionTokens","")}),answer:x.a.createFormField({value:Object(S.get)(t,"answer","")}),answerTokens:x.a.createFormField({value:Object(S.get)(t,"answerTokens","")})}}})(H),P=a(505),R=a(501),V=P.a.confirm,U=function(e){var t=e.dataSource,a=e.loading,c=e.db,o=Object(n.useState)(!1),l=Object(k.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)({}),d=Object(k.a)(u,2),p=d[0],m=d[1],f=function(e){return function(){V({title:"Do you want to delete these data?",onOk:function(){var t=Object(w.a)(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.collection("dataset").doc(e).delete();case 3:F.a.success({message:"Data deleted successfully."}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),F.a.error({message:"Something went wrong, please try again."});case 10:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}(),onCancel:function(){}})}},h=[{title:"Article ID",dataIndex:"articleId",key:"articleId"},{title:"Article",dataIndex:"article",key:"article"},{title:"Category",dataIndex:"category",key:"category",filters:D.map(function(e){return{text:e,value:e}}),onFilter:function(e,t){return 0===t.category.indexOf(e)}},{title:"Paragraph",dataIndex:"paragraph",key:"paragraph"},{title:"WH Word",dataIndex:"wh",key:"wh",filters:T.map(function(e){return{text:e,value:e}}),onFilter:function(e,t){return 0===t.wh.indexOf(e)}},{title:"Question",dataIndex:"question",key:"question"},{title:"Answer",dataIndex:"answer",key:"answer"},{title:"Action",key:"action",render:function(e,t){var a=t.id;return r.a.createElement(b.a,{icon:"delete",type:"danger",onClick:f(a)})}}];return r.a.createElement("div",null,r.a.createElement(P.a,{destroyOnClose:!0,centered:!0,bodyStyle:{maxHeight:650,overflowY:"scroll"},visible:i,footer:null,onCancel:function(){s(!1)}},r.a.createElement(N,{db:c,mode:"edit",data:p,closeModal:function(){s(!1)}})),r.a.createElement(R.a,{dataSource:t,columns:h,pagination:{pageSize:8},loading:a,onRow:function(e){return{onDoubleClick:function(){m(e),s(!0)}}}}))},J=a(504),K=h.a.TabPane,L=function(e){var t=e.values,a=e.numbers;return r.a.createElement("div",{style:{padding:"20px 30px"}},r.a.createElement("div",null,T[0],": (","".concat(a[0]),")",r.a.createElement(J.a,{percent:t[0],status:"active",format:function(e){return"".concat(e.toFixed(2)," %")}})),r.a.createElement("div",null,T[1],": (","".concat(a[1]),")",r.a.createElement(J.a,{percent:t[1],status:"active",format:function(e){return"".concat(e.toFixed(2)," %")}})),r.a.createElement("div",null,T[2],": (","".concat(a[2]),")",r.a.createElement(J.a,{percent:t[2],status:"active",format:function(e){return"".concat(e.toFixed(2)," %")}})),r.a.createElement("div",null,T[3],": (","".concat(a[3]),")",r.a.createElement(J.a,{percent:t[3],status:"active",format:function(e){return"".concat(e.toFixed(2)," %")}})),r.a.createElement("div",null,T[4],": (","".concat(a[4]),")",r.a.createElement(J.a,{percent:t[4],status:"active",format:function(e){return"".concat(e.toFixed(2)," %")}})))},Q=function(e){var t=e.dataset.reduce(function(e,t,a){return e[t.categoryId+1]||(e[t.categoryId+1]=[0,0,0,0,0]),e[t.categoryId+1][t.whId]=e[t.categoryId+1][t.whId]+1,e},{});t[0]=Object.keys(t).reduce(function(e,a,n){for(var r=0;r<5;r++)e[r]=e[r]+t[a][r];return e},[0,0,0,0,0]);var a=Object.keys(t).map(function(e,a){var n=t[e],c=n.reduce(function(e,t,a){return e+t},0);n=n.map(function(e){return e/c*100});var o="No Name";return o="0"===e?"All":D[e-1],o="".concat(o," (").concat(c,")"),r.a.createElement(K,{tab:r.a.createElement("span",null,o),key:a},r.a.createElement(L,{values:n,numbers:t[e]}))});return r.a.createElement(h.a,{defaultActiveKey:"0"},a)},Y=h.a.TabPane,Z=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).setTempData=function(e){a.setState({tempData:e})};return f.a.initializeApp({apiKey:"AIzaSyAeaMv3Y2fp877wzX187ZjT5-7AwxZkU0Y",authDomain:"datasetters.firebaseapp.com",databaseURL:"https://datasetters.firebaseio.com",projectId:"datasetters",storageBucket:"datasetters.appspot.com",messagingSenderId:"340269058452"}),a.db=f.a.firestore(),a.state={dataset:[],loading:!0,downloading:{json:!1,csv:!1},tempData:{}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.db.collection("dataset").onSnapshot(function(t){e.setState({loading:!0});var a=[];t.forEach(function(e){a.push(Object(l.a)({},e.data(),{id:e.id}))}),e.setState({dataset:a,loading:!1})})}},{key:"handleDownload",value:function(e){var t=this.state,a=t.downloading,n=t.dataset;if(!a[e]){if(a[e]=!0,this.setState({downloading:a}),"json"===e){var r=JSON.stringify(n);console.log(r);q(r,"application/json;charset=utf-8;","dataset","json")}else if("csv"===e){var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object.keys(e[0]),n=e.map(function(e){return a.map(function(t){return e[t]}).join(",")});return t&&n.splice(0,0,a),n.join("\n")}(n,!0);console.log(c);q(c,"text/csv;charset=utf-8;","dataset","csv")}a[e]=!1,this.setState({downloading:a})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataset,n=t.loading,c=t.downloading,o=t.tempData,i=a.map(function(e,t){return Object(l.a)({},e,{key:t})});return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{defaultActiveKey:"1"},r.a.createElement(Y,{tab:r.a.createElement("span",null,r.a.createElement(v.a,{type:"database"}),"Data Table"),key:"1"},r.a.createElement("div",{style:{padding:"20px 30px"}},r.a.createElement("h1",null,"Dataset",r.a.createElement(b.a,{type:"primary",shape:"round",icon:"download",size:"large",className:"download-btn json-btn",onClick:function(t){return e.handleDownload("json")},loading:c.json},"JSON"),r.a.createElement(b.a,{type:"primary",shape:"round",icon:"download",size:"large",className:"download-btn csv-btn",onClick:function(t){return e.handleDownload("csv")},loading:c.csv},"CSV")),r.a.createElement(U,{dataSource:i,loading:n,db:this.db}))),r.a.createElement(Y,{tab:r.a.createElement("span",null,r.a.createElement(v.a,{type:"file-add"}),"Add Data"),key:"2"},r.a.createElement("div",{style:{padding:"20px 100px"}},r.a.createElement("h1",null,"Add Data"),r.a.createElement(N,{db:this.db,data:o,setTempData:this.setTempData}))),r.a.createElement(Y,{tab:r.a.createElement("span",null,r.a.createElement(v.a,{type:"bar-chart"}),"Data Distribution"),key:"3"},r.a.createElement("div",{style:{padding:"20px 100px"}},r.a.createElement("h1",null,"Data Distribution"),r.a.createElement(Q,{dataset:a})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[233,1,2]]]);
//# sourceMappingURL=main.0721b3fa.chunk.js.map